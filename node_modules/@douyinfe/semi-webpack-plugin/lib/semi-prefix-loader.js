"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const loader_utils_1 = __importDefault(require("loader-utils"));
const parser_1 = require("@babel/parser");
const traverse_1 = __importDefault(require("@babel/traverse"));
const generator_1 = __importDefault(require("@babel/generator"));
function semiPrefixLoader(source) {
    const query = loader_utils_1.default.getOptions(this);
    const ast = (0, parser_1.parse)(source, {
        sourceType: 'module'
    });
    (0, traverse_1.default)(ast, {
        VariableDeclarator(path) {
            const { node } = path;
            const replacerKeys = Object.keys(query.replacers);
            if (replacerKeys.includes(node.id.name)) {
                node.init.value = query.replacers[node.id.name];
            }
        }
    });
    return (0, generator_1.default)(ast).code;
}
exports.default = semiPrefixLoader;
//# sourceMappingURL=semi-prefix-loader.js.map